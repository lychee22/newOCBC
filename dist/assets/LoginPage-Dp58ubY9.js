import{g as P,m as L,r as W,u as c,a as g,C as H,c as F,I as G,_ as D,b as _,d as U,e as V,j as r,T as q,R as j,S as A,B as S,f as X}from"./index-BwUFQxCd.js";import{F as f,I as w,R as J,C as Y}from"./index-DwIW0TlQ.js";import{C as K}from"./index-anHSYz9l.js";import{R as Q}from"./LockOutlined-BDzOv1xj.js";import{s as x}from"./index-Dqi8bruG.js";import"./ExclamationCircleFilled-BrtT_98r.js";const Z=t=>{const{componentCls:e,sizePaddingEdgeHorizontal:o,colorSplit:n,lineWidth:i,textPaddingInline:h,orientationMargin:d,verticalMarginInline:s}=t;return{[e]:Object.assign(Object.assign({},W(t)),{borderBlockStart:`${c(i)} solid ${n}`,"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",marginInline:s,marginBlock:0,verticalAlign:"middle",borderTop:0,borderInlineStart:`${c(i)} solid ${n}`},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:`${c(t.dividerHorizontalGutterMargin)} 0`},[`&-horizontal${e}-with-text`]:{display:"flex",alignItems:"center",margin:`${c(t.dividerHorizontalWithTextGutterMargin)} 0`,color:t.colorTextHeading,fontWeight:500,fontSize:t.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:`0 ${n}`,"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:`${c(i)} solid transparent`,borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},[`&-horizontal${e}-with-text-left`]:{"&::before":{width:`calc(${d} * 100%)`},"&::after":{width:`calc(100% - ${d} * 100%)`}},[`&-horizontal${e}-with-text-right`]:{"&::before":{width:`calc(100% - ${d} * 100%)`},"&::after":{width:`calc(${d} * 100%)`}},[`${e}-inner-text`]:{display:"inline-block",paddingBlock:0,paddingInline:h},"&-dashed":{background:"none",borderColor:n,borderStyle:"dashed",borderWidth:`${c(i)} 0 0`},[`&-horizontal${e}-with-text${e}-dashed`]:{"&::before, &::after":{borderStyle:"dashed none none"}},[`&-vertical${e}-dashed`]:{borderInlineStartWidth:i,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},"&-dotted":{background:"none",borderColor:n,borderStyle:"dotted",borderWidth:`${c(i)} 0 0`},[`&-horizontal${e}-with-text${e}-dotted`]:{"&::before, &::after":{borderStyle:"dotted none none"}},[`&-vertical${e}-dotted`]:{borderInlineStartWidth:i,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},[`&-plain${e}-with-text`]:{color:t.colorText,fontWeight:"normal",fontSize:t.fontSize},[`&-horizontal${e}-with-text-left${e}-no-default-orientation-margin-left`]:{"&::before":{width:0},"&::after":{width:"100%"},[`${e}-inner-text`]:{paddingInlineStart:o}},[`&-horizontal${e}-with-text-right${e}-no-default-orientation-margin-right`]:{"&::before":{width:"100%"},"&::after":{width:0},[`${e}-inner-text`]:{paddingInlineEnd:o}}})}},ee=t=>({textPaddingInline:"1em",orientationMargin:.05,verticalMarginInline:t.marginXS}),te=P("Divider",t=>{const e=L(t,{dividerHorizontalWithTextGutterMargin:t.margin,dividerHorizontalGutterMargin:t.marginLG,sizePaddingEdgeHorizontal:0});return[Z(e)]},ee,{unitless:{orientationMargin:!0}});var re=function(t,e){var o={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(o[n[i]]=t[n[i]]);return o};const ne=t=>{const{getPrefixCls:e,direction:o,divider:n}=g.useContext(H),{prefixCls:i,type:h="horizontal",orientation:d="center",orientationMargin:s,className:m,rootClassName:a,children:u,dashed:z,variant:p="solid",plain:M,style:N}=t,O=re(t,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","variant","plain","style"]),l=e("divider",i),[T,k,E]=te(l),b=!!u,$=d==="left"&&s!=null,v=d==="right"&&s!=null,R=F(l,n==null?void 0:n.className,k,E,`${l}-${h}`,{[`${l}-with-text`]:b,[`${l}-with-text-${d}`]:b,[`${l}-dashed`]:!!z,[`${l}-${p}`]:p!=="solid",[`${l}-plain`]:!!M,[`${l}-rtl`]:o==="rtl",[`${l}-no-default-orientation-margin-left`]:$,[`${l}-no-default-orientation-margin-right`]:v},m,a),y=g.useMemo(()=>typeof s=="number"?s:/^\d+$/.test(s)?Number(s):s,[s]),B=Object.assign(Object.assign({},$&&{marginLeft:y}),v&&{marginRight:y});return T(g.createElement("div",Object.assign({className:R,style:Object.assign(Object.assign({},n==null?void 0:n.style),N)},O,{role:"separator"}),u&&h!=="vertical"&&g.createElement("span",{className:`${l}-inner-text`,style:B},u)))};var ie={icon:function(e,o){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M81.8 537.8a60.3 60.3 0 010-51.5C176.6 286.5 319.8 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c-192.1 0-335.4-100.5-430.2-300.2z",fill:o}},{tag:"path",attrs:{d:"M512 258c-161.3 0-279.4 81.8-362.7 254C232.6 684.2 350.7 766 512 766c161.4 0 279.5-81.8 362.7-254C791.4 339.8 673.3 258 512 258zm-4 430c-97.2 0-176-78.8-176-176s78.8-176 176-176 176 78.8 176 176-78.8 176-176 176z",fill:o}},{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258s279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766z",fill:e}},{tag:"path",attrs:{d:"M508 336c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z",fill:e}}]}},name:"eye",theme:"twotone"},oe=function(e,o){return g.createElement(G,D({},e,{ref:o,icon:ie}))},ae=g.forwardRef(oe);const{Title:I,Text:C}=q,me=()=>{const[t]=f.useForm(),[e,o]=g.useState(!1),n=_(),{setUserInfo:i,setToken:h}=U(),{generateRoutes:d}=V(),s=async m=>{o(!0);try{const a=await X(m.username,m.password);if(a){console.log("Login success:",a),i({loginID:a.username,name:a.name,role:a.role,env:"dev"}),h("mock-token"),localStorage.setItem("isLoggedIn","true"),localStorage.setItem("userRole",a.role),localStorage.setItem("currentUser",JSON.stringify(a));try{await d(a.role),console.log("Routes generated successfully for user:",a.username)}catch(u){console.error("Failed to generate routes:",u),x.warning("菜单加载失败，部分功能可能不可用")}x.success("登录成功！"),n("/")}else x.error("用户名或密码错误")}catch(a){console.error("Login failed:",a),x.error("登录失败，请稍后重试")}finally{o(!1)}};return r.jsx("div",{className:"login-container",children:r.jsxs("div",{className:"login-content",children:[r.jsxs("div",{className:"login-logo",children:[r.jsx(I,{level:2,children:"FXOL"}),r.jsx(C,{type:"secondary",children:"外汇交易系统"})]}),r.jsxs(K,{className:"login-card",children:[r.jsx(I,{level:3,className:"login-title",children:"登录"}),r.jsx("div",{className:"login-hint",children:r.jsx(C,{type:"secondary",children:"测试账号：admin/admin123 或 user/user123"})}),r.jsxs(f,{form:t,name:"login",onFinish:s,layout:"vertical",children:[r.jsx(f.Item,{name:"username",rules:[{required:!0,message:"请输入用户名"}],label:"用户名",children:r.jsx(w,{prefix:r.jsx(j,{}),placeholder:"请输入用户名"})}),r.jsx(f.Item,{name:"password",rules:[{required:!0,message:"请输入密码"}],label:"密码",children:r.jsx(w.Password,{prefix:r.jsx(Q,{}),placeholder:"请输入密码",iconRender:m=>m?r.jsx(ae,{}):r.jsx(J,{})})}),r.jsx(f.Item,{name:"remember",valuePropName:"checked",initialValue:!0,children:r.jsxs(A,{children:[r.jsx(Y,{children:"记住我"}),r.jsx("a",{href:"#",className:"login-forgot",children:"忘记密码？"})]})}),r.jsx(f.Item,{children:r.jsx(S,{type:"primary",htmlType:"submit",loading:e,block:!0,size:"large",children:"登录"})})]}),r.jsx(ne,{children:"其他登录方式"}),r.jsx("div",{className:"login-other",children:r.jsx(S,{icon:r.jsx(j,{}),block:!0,children:"管理员登录"})})]})]})})};export{me as default};
